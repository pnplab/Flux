var cct=$.cookie("csrf_cookie_aware");
jQuery(document).ready(function(){function m(){var a=['<div id="new_broadcast'+h+'" class="new_broadcast">','<a id="remove-broadcast" class="remove-button">'+f+"</a>",'<input class="plugin_broadcast" type="text" maxlength="400" name="new'+h+':plugin_broadcast" placeholder="broadcast">','<input class="plugin_broadcast_desc" type="text" maxlength="400" name="new'+h+':plugin_broadcast_desc" placeholder="description">','<div class="add-newextra-button"><a class="add-newextra">'+n+"</a></div>",'</div>\n<div class="add-broadcast-button" >',
'<a class="add-broadcast">'+g+"</a>","</div>"].join("\n");$(".add-broadcast-button").remove();$("#broadcasts").append(a);h+=1}$(document).on("change",function(){$("#reload").css("display","block")});$(document).on("click","#reload",function(){location.reload()});var l=window.location.protocol+"//"+window.location.host+"/",g='<img src="'+l+'application/views/images/developer/add.png" title="Add new" class="add_image" height="24" alt="">',f='<img src="'+l+'application/views/images/delete_icon.png" title="Remove" class="remove_image" height="12" alt="">',
n='<img src="'+l+'application/views/images/developer/new_extra.png" title="Add a new extra to a broadcast" class="addextra_image" height="24" alt="">',e=1,h=1,c=1,d=1,k=1;$(document).on("click","#add-setting",function(){var a=["<div id='new_setting"+e+"' class='new_setting'>","<a id='remove-settings' class='remove-button'>"+f+"</a>","<select class='plugin_settings_type' name='new"+e+":plugin_setting_type'>","<option value='integer'>Integer</option>\n<option value='real'>Real</option>\n<option value='text'>Text</option>\n</select>",
"<input class='plugin_settings' type='text' maxlength='400' name='new"+e+":plugin_setting' placeholder='setting'>","<input class='plugin_settings_desc' type='text' maxlength='400' name='new"+e+":plugin_setting_desc' placeholder='description'>","</div>\n<div class='add-setting-button' >","<a id='add-setting'>"+g+"</a>","</div>"].join("\n");$(this).parent().remove();$(".settings").append(a);e+=1});$(document).on("click","#remove-settings",function(){$(this).parent().find(".plugin_settings").val("this_field_was_removed");
$(this).parent().find(".plugin_settings_desc").val("this_field_was_removed");var a=$(".plugin_settings:visible").length,b=!1,b="new"==$(this).parent().attr("id").substring(0,3)?!0:!1;1<a?b?$(this).parent().remove():$(this).parent().toggle():(b?$(this).parent().remove():$(this).parent().toggle(),b=["<div id='new_setting"+e+"' class='new_setting'>","<a id='remove-settings' class='remove-button'>"+f+"</a>","<select class='plugin_settings_type' name='new"+e+":plugin_setting_type'>","<option value='integer'>Integer</option>\n<option value='real'>Real</option>\n<option value='text'>Text</option>\n</select>",
"<input class='plugin_settings' type='text' maxlength='400' name='new"+e+":plugin_setting' placeholder='setting'>","<input class='plugin_settings_desc' type='text' maxlength='400' name='new"+e+":plugin_setting_desc' placeholder='description'>","</div>\n<div class='add-setting-button' >","<a id='add-setting'>"+g+"</a>","</div>"].join("\n"),$(".add-setting-button").remove(),$(".settings").append(b))});$(document).on("click","#remove-broadcast",function(){var a=$(this).parent(),b=!1;"new"==$(this).parent().attr("id").substring(0,
3)&&(b=!0);1<$(".plugin_broadcast:visible").length?b?a.remove():(a.toggle(),a.find(".plugin_broadcast").val("this_field_was_removed"),a.find(".plugin_broadcast_desc").val("this_field_was_removed"),a.find(".plugin_extras").val("this_field_was_removed"),a.find(".plugin_extras_desc").val("this_field_was_removed")):(b?a.remove():a.toggle(),m())});$(document).on("click","#remove-broadcastextra",function(){var a=$(this).parent(),b=!1;"new"==$(this).parent().attr("id").substring(0,3)&&(b=!0);b?a.remove():
(a.toggle(),a.find(".plugin_extras").val("this_field_was_removed"),a.find(".plugin_extras_desc").val("this_field_was_removed"))});$(document).on("click",".add-broadcast",m);$(document).on("click",".add-newextra",function(){var a=$(this).parent().parent(),b=$(a).attr("id").replace(/^\D+/g,""),c="";"new"==$(a).attr("id").substr(0,3)&&(c="new");a=["<div id='new_extra-"+b+"-"+k+"' class='new_broadcast_extras'>","<a id='remove-broadcastextra' class='remove-button'>"+f+"</a>",'<input class="plugin_extras" type="text" maxlength="400" name="new'+
k+":plugin_broadcastextra:"+c+b+'" placeholder="broadcast extra">','<input class="plugin_extras_desc" type="text" maxlength="400" name="new'+k+":plugin_broadcastextra_desc:"+c+b+'" placeholder=description>',"</div>"].join("\n");$(this).parent().parent().append(a);k+=1});$(document).on("click",".add-context",function(){var a=["<div id='new_contextprovider-"+c+"' class='new_contextprovider'>","<a id='remove-contextprovider' class='remove-button'>"+f+"</a>","<input class='context_providers' type='text' maxlength='400' name='new"+
c+":context_providers' placeholder='context provider'>","<input class='context_providers_uri' type='text' maxlength='100' name='new"+c+":context_providers_uri' placeholder='uri'>","<input class='context_provider_desc' type='text' maxlength='400' name='new"+c+":context_provider_desc' placeholder='description'>",'</div>\n<div class="add-context-button" >','<a class="add-context">'+g+"</a>","</div>"].join("\n");$(this).parent().remove();$("#context_providers").append(a);$(".tables-not-found").length&&
($(".tables-not-found").remove(),$("#new_table-0").toggle());a=['<div id="new_table-'+c+'" class="table">','<div id="new_table'+c+'" class="new_table_name">unnamed</div>','<div id="newtablefield-'+d+'" class="newtablefields">','<a id="remove-tablefield" class="remove-button">'+f+"</a>",'<input class="table_name" type="text" maxlength="40" name="new'+d+":table_name:new"+c+'" placeholder="name">','<div id="tableselect"><select class="table_type" name="new'+d+":table_type:new"+c+'"><option value="NULL">NULL</option><option value="INTEGER">INTEGER</option><option value="REAL">REAL</option><option value="TEXT">TEXT</option><option value="BLOB">BLOB</option></select></div>',
'<input class="table_desc" type="text" maxlength="400" size="50" name="new'+d+":table_desc:new"+c+'" placeholder="description">','</div>\n<div class="add-table-button">','<a class="add-table">'+g+"</a>","</div>\n</div>"].join("\n");$("#tables").append(a);c+=1;d+=1});$(document).on("click","#remove-contextprovider",function(){var a=$(this).parent(),b=a.attr("id").split("-");$tablename="";var e=$(".context_providers:visible").length;"context_provider"==b[0]?(a.find(".context_providers").val("this_field_was_removed"),
a.find(".context_providers_uri").val("this_field_was_removed"),a.find(".context_provider_desc").val("this_field_was_removed"),$tablename="table-",a.toggle(),$("#"+$tablename+b[1]).remove()):"new_contextprovider"==b[0]&&($tablename="new_table",a.remove(),$("#"+$tablename+b[1]).parent().remove());1==e&&(a=["<div id='new_contextprovider-"+c+"' class='new_contextprovider'>","<a id='remove-contextprovider' class='remove-button'>"+f+"</a>","<input class='context_providers' type='text' maxlength='400' placeholder='table name'>\n<input class='context_providers_uri' type='text' maxlength='100' placeholder='uri'>\n<input class='context_provider_desc' type='text' maxlength='400' placeholder='description'>\n</div>\n<div class=\"add-context-button\" >",
'<a class="add-context">'+g+"</a>","</div>"].join("\n"),$(".add-context-button").remove(),$("#context_providers").append(a),a=['<div id="new_table-'+c+'" class="table">','<div id="new_table'+c+'" class="new_table_name">unnamed</div>','<div id="newtablefield-'+d+'" class="newtablefields">','<a id="remove-tablefield" class="remove-button">'+f+"</a>",'<input class="table_name" type="text" maxlength="40" name="new'+d+":table_name:"+c+'" placeholder="name">','<div id="tableselect"><select class="table_type" name="new'+
d+":table_type:"+c+'"><option value="NULL">NULL</option><option value="INTEGER">INTEGER</option><option value="REAL">REAL</option><option value="TEXT">TEXT</option><option value="BLOB">BLOB</option></select></div>','<input class="table_desc" type="text" maxlength="400" size="50" name="new'+d+":table_desc:"+c+'" placeholder="description">','</div>\n<div class="add-table-button">','<a class="add-table">'+g+"</a>","</div>\n</div>"].join("\n"),$("#tables").append(a),c+=1,d+=1)});$(document).on("change",
".context_providers",function(){$(".tables-not-found").length&&($(".tables-not-found").remove(),$("#new_table-0").toggle());var a=$(this).parent().attr("id").split("-");if("context_provider"==a[0]){$("#table"+a[1]).empty();var b=$(this).val();""==b?$("#table"+a[1]).append("unnamed"):$("#table"+a[1]).append(b)}else"new_contextprovider"==a[0]&&($("#new_table"+a[1]).empty(),b=$(this).val(),""==b?$("#new_table"+a[1]).append("unnamed"):$("#new_table"+a[1]).append(b))});$(document).on("click",".add-table",
function(){var a=$(this).parent().parent().attr("id").split("-"),b="";"new"==a[0].substring(0,3)&&(b="new");a=['<div id="newtablefield-'+d+'" class="newtablefields">','<a id="remove-tablefield" class="remove-button">'+f+"</a>",'<input class="table_name" type="text" maxlength="40" name="new'+d+":table_name:"+b+a[1]+'" placeholder="name">','<div id="tableselect"><select class="table_type" name="new'+d+":table_type:"+b+a[1]+'"><option value="NULL">NULL</option><option value="INTEGER">INTEGER</option><option value="REAL">REAL</option><option value="TEXT">TEXT</option><option value="BLOB">BLOB</option></select></div>',
'<input class="table_desc" type="text" maxlength="400" size="50" name="new'+d+":table_desc:"+b+a[1]+'" placeholder="description">','</div>\n<div class="add-table-button" >','<a class="add-table">'+g+"</a>","</div>"].join("\n");$(this).parent().parent().append(a);$(this).parent().remove();d+=1});$(document).on("click","#remove-tablefield",function(){var a=$(this).parent().parent().attr("id");$(this).parent().find(".table_name").val("");$(this).parent().find(".table_type").val("");$(this).parent().find(".table_desc").val("");
var b=!1;"new"==$(this).parent().attr("id").substring(0,3)&&(b=!0);1<$("#"+a+" div.tablefields:visible").length+$("#"+a+" div.newtablefields").length&&(b?$(this).parent().remove():($(this).parent().find(".table_name").val("this_field_was_removed"),$(this).parent().find(".table_type").val("this_field_was_removed"),$(this).parent().find(".table_desc").val("this_field_was_removed"),$(this).parent().toggle()))});document.getElementById("uploadBtn").onchange=function(){document.getElementById("uploadFile").value=
this.files[0].name;$("#uploadFile2").val("new_file");0==$("#remove-packagefile").length&&$("#fileupload").append('<a id="remove-packagefile" >'+f+"</a>")};document.getElementById("iconuploadBtn").onchange=function(){document.getElementById("uploadIconFile").value=this.files[0].name;$("#uploadIconFile2").val("new_icon");0==$("#remove-iconfile").length&&$("#iconupload").append('<a id="remove-iconfile" >'+f+"</a>")};$(document).on("click","#remove-packagefile",function(){var a=document.getElementById("uploadFile").value;
confirm('Would you like to remove the chosen file "'+a+'"?')&&($("#uploadBtn")[0].value="",$("#uploadFile").val(""),$("#uploadFile2").val(""),$(this).remove())});$(document).on("click","#remove-iconfile",function(){var a=document.getElementById("uploadIconFile").value;confirm('Would you like to remove the chosen file "'+a+'"?')&&($("#iconuploadBtn")[0].value="",$("#uploadIconFile").val(""),$("#uploadIconFile2").val(""),$(this).remove())})});
